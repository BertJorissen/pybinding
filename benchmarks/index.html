

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Benchmarks &mdash; pybinding</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />

  
    <link rel="stylesheet" href="../_static/extra.css" type="text/css" />
      <script src="../_static/documentation_options.js?v=d55fa986"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Changelog" href="../changelog.html" />
    <link rel="prev" title="About" href="../intro.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            pybinding
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../intro.html">About</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Benchmarks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">Changelog</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">User guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../install/index.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/index.html">Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../advanced/index.html">Additional Topics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../plotting/index.html">Plotting Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples/index.html">Random Examples</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference docs</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../materials/index.html">Material Repository</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../experimental/index.html">Experimental</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">pybinding</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Benchmarks</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/benchmarks/index.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="benchmarks">
<h1>Benchmarks<a class="headerlink" href="#benchmarks" title="Link to this heading">¶</a></h1>
<p>One of the main features of pybinding is an easy-to-use and fast model builder: it constructs the
tight-binding Hamiltonian matrix. This can be a demanding task for large or complicated systems
(with many parameters). Great care was taken to make this process fast.</p>
<p>We compare the performance of pybinding with the <a class="reference external" href="http://kwant-project.org/">Kwant package</a>.
Both code packages are based on the numerical tight-binding method and can build identical
Hamiltonian matrices. For calculations involving these matrices, the packages specialize in
different ways: Kwant is intended for transport calculations with scattering systems while
pybinding targets large finite-sized and periodic systems in 1 to 3 dimensions. Pybinding can
also be used to construct scattering systems, however it does not have a builtin solver for
transport problems. This is where the <a class="reference internal" href="../advanced/kwant.html"><span class="doc">Kwant compatibility</span></a> layer comes in: it’s possible to
build a system in pybinding and use Kwant’s solvers for transport calculations. This combination
takes advantage of the much faster model builder – see the comparison below.</p>
<section id="system-construction">
<h2>System construction<a class="headerlink" href="#system-construction" title="Link to this heading">¶</a></h2>
<p>The code used to obtain these results is available here: <a class="reference download internal" download="" href="../_downloads/c4c11aaffcd85cef538c2537e033b86b/system_build.py"><code class="xref download docutils literal notranslate"><span class="pre">Source</span> <span class="pre">code</span></code></a>.
You can download it and try it on your own computer. Usage instructions are located at the top
of the script file.</p>
<figure class="align-default" id="id1">
<img alt="Tight-binding code performance comparison" src="../_images/system_build.png" />
<figcaption>
<p><span class="caption-text">The results were measured for pybinding v0.8.0 and kwant v1.2.2 using:
Intel Core i7-4960HQ CPU, 16 GiB RAM, Python 3.5, macOS 10.11. The RAM
usage was measured using memory_profiler v0.41.</span><a class="headerlink" href="#id1" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<p>The benchmark constructs a circular graphene flake with a pn-junction and a constant magnetic
field. The system build time is measured from the start of the definition to the point where the
Hamiltonian matrix is fully constructed (a sparse matrix is used in both cases).</p>
<p>Pybinding builds the Hamiltonian much faster than Kwant: by two orders of magnitude. The main
reason for this is in the way the system shape and fields are implemented. Both Kwant and pybinding
take user-defined functions as parameters for model construction. Kwant calls these functions
individually for each atom and hopping which is quite slow. Pybinding stores all atoms and hoppings
in contiguous arrays and then calls the user-defined functions just once for the entire dataset.
This takes advantage of vectorization and drastically improves performance. Similarly, the lower
memory usage is achieved by using arrays and CSR matrices rather than linked lists and trees.</p>
<p>Please note that at the time of writing pybinding v0.8 does lack certain system construction
features compared to Kwant. Specifically, it is currently not possible to build heterostructures
in pybinding, but this will be resolved in the near future. New features will be added while
maintaining good performance.</p>
<p>At first glance it may seem like system build time is not really relevant because it is only done
once and then multiple calculations can be applied to the constructed system. However, every time
a parameter is changed (like some field strength) the Hamiltonian matrix will need to be rebuilt.
Even though Kwant does take this into account and only does a partial rebuild, pybinding is still
much faster and this is very apparent in transport calculations which sweep over some model
parameter. For more information and a direct comparison, see the <a class="reference internal" href="../advanced/kwant.html"><span class="doc">Kwant compatibility</span></a> section.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../intro.html" class="btn btn-neutral float-left" title="About" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../changelog.html" class="btn btn-neutral float-right" title="Changelog" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2015-2024, Bert Jorissen, Dean Moldovan.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>